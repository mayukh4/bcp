# This is the bcp config file for Ophiuchus any variables that are prone to change should go in this file 
main:
{
  logpath = "log/main_oph.log";
  cmdlog = "log/cmds_oph.log";
};

bvexcam:
{
  enabled = 1;
  logfile = "log/bvexcam.log";
  camera_handle = 1;
  lens_desc = "/dev/ttyLens1port8000";
  port = 8000;
  workdir = "/home/ophiuchus/bvexcam";
  configdir = "bvexcam";
  t_exp = 700;
  save_image = 0;
  lon = -81.367;
  lat = 48.568;
  alt = 50.0;
  pbob = 1;
  relay = 5;
};

accelerometer:
{
  enabled = 0;
  raspberry_pi_ip = "192.168.0.23";
  port = 65432;
  num_accelerometers = 3;
  output_dir = "/media/ophiuchus/T7/accelerometer_data";
  logfile = "log/accelerometer.log";
  chunk_duration = 600;  # Duration of each data chunk in seconds
  print_interval = 10000;  # Number of samples between status prints
};

motor:
{
  enabled = 1;
  logfile = "log/motor.log";
  port = "enp4s0"
  datadir = "/media/ophiuchus/T7/motor";
  velP = 28.0;
  velI = 18.0;
  velD = 1.0;
  velI_db = 0.005;
  max_delta = 5; #maximum change in current in 0.01 A
  friction = 350.0; #magnitude of the frictional current in 0.01 A
  friction_db = 3; 
  vel_gain = 3.0;
  tel_offset = -0.7;
  max_current = 380; #max currnet in 0.01 A
  max_velocity = 3.0;
  pos_tol = 0.05; #position tolerance
  pbob = 1;
  relay = 0;
};

lazisusan:
{
 enabled = 0;
 logfile = "log/lazisusan.log";
 datadir = "/media/ophiuchus/T7/lazisusan";
 port = "/dev/ttyACM1";
 gear_ratio = 15.75;
 offset = 0.0;
 g_az = 0.5;
 max_freq = 150.0;
 deltav = 0.1;
 vmax = 1.0;
 db = 0.1;
 gps_db = 0.2;
};

lockpin:
{
 enabled = 1;
 logfile = "log/lockpin.log";
 baud = 9600;
 serialport = "/dev/ttyACM0";
 duration = 2000;
 pbob = 1;
 relay = 1;
};

gps_server:
{
 enabled = 1;
 logfile = "log/gps_server.log";
 ip = "172.20.4.170";
 port = 8082;
 timeout = 50000;
};

starcam_downlink:
{
 enabled = 1;
 logfile = "log/starcam_downlink.log";
 port = 8001;
 compression_quality = 60;
 chunk_size = 1000;
 max_bandwidth_kbps = 10000;
 image_timeout_sec = 300;
 workdir = "/home/ophiuchus/bvexcam/pics";
 notification_file = "/tmp/starcam_new_image.notify";
};

server:
{
 enabled = 1;
 logfile = "log/server.log";
 ip = "0.0.0.0";
 port = 8002;
 timeout = 50000;
};

power:
{
 enabled = 1
 logfile = "log/pbob.log";
 ip = "0.0.0.0";
 port = 8003;
 timeout = 50000;
 
 pbob0:
 { 
  enabled = 1;
  id = 0;
  ip = "172.20.4.174";
  num_relays = 6;
  workdir = "/media/ophiuchus/T7/pbob/pbob0"
 };

 pbob1:
 {
  enabled = 1;
  id = 1;
  ip = "172.20.4.175";
  num_relays = 6;
  workdir = "/media/ophiuchus/T7/pbob/pbob1" 
 };

 pbob2:
 {
  enabled = 1;
  id = 2;
  ip = "172.20.4.176";
  num_relays = 4;
  workdir = "/media/ophiuchus/T7/pbob/pbob2"
 };

};

lna:
{
 enabled = 1;
 pbob = 0;
 relay = 2;
};

mixer:
{
 enabled = 1;
 pbob = 0;
 relay = 1;
};

rfsoc:
{
 pbob = 0;
 relay = 0;
};

cmd_server:
{
    port = 8004;
    timeout = 1;
};

gps:
{
 pbob = 0;
 relay = 4;
};

backend:
{
 pbob = 2;
 relay = 1;
};

timing_box:
{
 pbob = 0;
 relay = 3;
};

system_monitor:
{
 enabled = 1;
 logfile = "log/system_monitor.log";
 update_interval_sec = 10;  # Update system metrics every 10 seconds
};

housekeeping:
{
 enabled = 1;
 logfile = "log/housekeeping.log";
 data_path = "/media/ophiuchus/T7/housekeeping";
 pbob = 2;
 relay = 3;
 file_rotation_interval = 600;  # 10 minutes in seconds
};

heaters:
{
 pbob = 2;
 relay = 0;
};
